package com.studious.display;

import com.studious.dao.QuestionDAO;
import com.studious.dao.QuestionOfTestDAO;
import com.studious.dao.ResutlDAO;
import com.studious.dao.StudentDAO;
import com.studious.dao.TestDAO;
import com.studious.entity.Question;
import com.studious.entity.QuestionOfTest;
import com.studious.entity.Result;
import com.studious.entity.Student;
import com.studious.entity.Test;
import com.studious.utils.MsgBox;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import java.text.SimpleDateFormat;
import java.util.Date;
import javax.swing.Timer;

/**
 *
 * @author Admin
 */
public class DoTest extends java.awt.Dialog {

    /**
     * Creates new form DoTest
     */
    public DoTest(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        setLocationRelativeTo(null);
        init();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        grChoose = new javax.swing.ButtonGroup();
        pnlBackground = new javax.swing.JPanel();
        lblLogo = new javax.swing.JLabel();
        lblTitle = new javax.swing.JLabel();
        lblDoneQuestion = new javax.swing.JLabel();
        btnEndTest = new javax.swing.JButton();
        lblTime = new javax.swing.JLabel();
        pnlContent = new javax.swing.JPanel();
        pnlButton = new javax.swing.JPanel();
        btn1 = new javax.swing.JButton();
        btn2 = new javax.swing.JButton();
        btn3 = new javax.swing.JButton();
        btn4 = new javax.swing.JButton();
        btn5 = new javax.swing.JButton();
        btn6 = new javax.swing.JButton();
        btn7 = new javax.swing.JButton();
        btn8 = new javax.swing.JButton();
        btn9 = new javax.swing.JButton();
        btn10 = new javax.swing.JButton();
        btn11 = new javax.swing.JButton();
        btn12 = new javax.swing.JButton();
        btn13 = new javax.swing.JButton();
        btn14 = new javax.swing.JButton();
        btn15 = new javax.swing.JButton();
        btn16 = new javax.swing.JButton();
        btn17 = new javax.swing.JButton();
        btn18 = new javax.swing.JButton();
        btn19 = new javax.swing.JButton();
        btn20 = new javax.swing.JButton();
        btn21 = new javax.swing.JButton();
        btn22 = new javax.swing.JButton();
        btn23 = new javax.swing.JButton();
        btn24 = new javax.swing.JButton();
        btn25 = new javax.swing.JButton();
        btn26 = new javax.swing.JButton();
        btn27 = new javax.swing.JButton();
        btn28 = new javax.swing.JButton();
        btn29 = new javax.swing.JButton();
        btn30 = new javax.swing.JButton();
        btn31 = new javax.swing.JButton();
        btn32 = new javax.swing.JButton();
        btn33 = new javax.swing.JButton();
        btn34 = new javax.swing.JButton();
        btn35 = new javax.swing.JButton();
        btn36 = new javax.swing.JButton();
        btn37 = new javax.swing.JButton();
        btn38 = new javax.swing.JButton();
        btn39 = new javax.swing.JButton();
        btn40 = new javax.swing.JButton();
        btn41 = new javax.swing.JButton();
        btn42 = new javax.swing.JButton();
        btn43 = new javax.swing.JButton();
        btn44 = new javax.swing.JButton();
        btn45 = new javax.swing.JButton();
        btn46 = new javax.swing.JButton();
        btn47 = new javax.swing.JButton();
        btn48 = new javax.swing.JButton();
        btn49 = new javax.swing.JButton();
        btn50 = new javax.swing.JButton();
        pnlShowQuestion = new javax.swing.JPanel();
        lblTitleTest = new javax.swing.JLabel();
        lblQuestionNumber = new javax.swing.JLabel();
        lblShowAnsA = new javax.swing.JLabel();
        lblShowAnsB = new javax.swing.JLabel();
        lblShowAnsC = new javax.swing.JLabel();
        lblShowAnsD = new javax.swing.JLabel();
        pnlChooseAnswer = new javax.swing.JPanel();
        lblChooseAns = new javax.swing.JLabel();
        rdoChooseAnsA = new javax.swing.JRadioButton();
        rdoChooseAnsB = new javax.swing.JRadioButton();
        rdoChooseAnsC = new javax.swing.JRadioButton();
        rdoChooseAnsD = new javax.swing.JRadioButton();
        btnPrev = new javax.swing.JButton();
        btnNext = new javax.swing.JButton();

        setBackground(new java.awt.Color(232, 255, 183));
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                closeDialog(evt);
            }
        });

        pnlBackground.setBackground(new java.awt.Color(232, 255, 183));

        lblLogo.setBackground(new java.awt.Color(232, 255, 183));
        lblLogo.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/studious/icons/Studious-255x68.png"))); // NOI18N

        lblTitle.setFont(new java.awt.Font("Inter", 1, 24)); // NOI18N
        lblTitle.setForeground(new java.awt.Color(47, 106, 1));
        lblTitle.setText("LÀM BÀI THI THỬ");

        lblDoneQuestion.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        lblDoneQuestion.setText("Số câu đã làm: 5/40");

        btnEndTest.setBackground(new java.awt.Color(215, 215, 215));
        btnEndTest.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        btnEndTest.setText("KẾT THÚC BÀI THI");
        btnEndTest.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        btnEndTest.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEndTestActionPerformed(evt);
            }
        });

        lblTime.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblTime.setForeground(new java.awt.Color(255, 0, 51));
        lblTime.setText("00:00");

        pnlContent.setBackground(new java.awt.Color(232, 255, 183));

        pnlButton.setBackground(new java.awt.Color(232, 255, 183));
        pnlButton.setLayout(new java.awt.GridLayout(5, 10, 5, 5));

        btn1.setBackground(new java.awt.Color(229, 229, 229));
        btn1.setText("1");
        btn1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn1ActionPerformed(evt);
            }
        });
        pnlButton.add(btn1);

        btn2.setBackground(new java.awt.Color(229, 229, 229));
        btn2.setText("2");
        btn2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn2ActionPerformed(evt);
            }
        });
        pnlButton.add(btn2);

        btn3.setBackground(new java.awt.Color(229, 229, 229));
        btn3.setText("3");
        btn3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn3ActionPerformed(evt);
            }
        });
        pnlButton.add(btn3);

        btn4.setBackground(new java.awt.Color(229, 229, 229));
        btn4.setText("4");
        btn4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn4ActionPerformed(evt);
            }
        });
        pnlButton.add(btn4);

        btn5.setBackground(new java.awt.Color(229, 229, 229));
        btn5.setText("5");
        btn5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn5ActionPerformed(evt);
            }
        });
        pnlButton.add(btn5);

        btn6.setBackground(new java.awt.Color(229, 229, 229));
        btn6.setText("6");
        btn6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn6ActionPerformed(evt);
            }
        });
        pnlButton.add(btn6);

        btn7.setBackground(new java.awt.Color(229, 229, 229));
        btn7.setText("7");
        pnlButton.add(btn7);

        btn8.setBackground(new java.awt.Color(229, 229, 229));
        btn8.setText("8");
        btn8.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn8ActionPerformed(evt);
            }
        });
        pnlButton.add(btn8);

        btn9.setBackground(new java.awt.Color(229, 229, 229));
        btn9.setText("9");
        btn9.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn9ActionPerformed(evt);
            }
        });
        pnlButton.add(btn9);

        btn10.setBackground(new java.awt.Color(229, 229, 229));
        btn10.setText("10");
        btn10.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn10ActionPerformed(evt);
            }
        });
        pnlButton.add(btn10);

        btn11.setBackground(new java.awt.Color(229, 229, 229));
        btn11.setText("11");
        btn11.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn11ActionPerformed(evt);
            }
        });
        pnlButton.add(btn11);

        btn12.setBackground(new java.awt.Color(229, 229, 229));
        btn12.setText("12");
        btn12.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn12ActionPerformed(evt);
            }
        });
        pnlButton.add(btn12);

        btn13.setBackground(new java.awt.Color(229, 229, 229));
        btn13.setText("13");
        btn13.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn13ActionPerformed(evt);
            }
        });
        pnlButton.add(btn13);

        btn14.setBackground(new java.awt.Color(229, 229, 229));
        btn14.setText("14");
        btn14.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn14ActionPerformed(evt);
            }
        });
        pnlButton.add(btn14);

        btn15.setBackground(new java.awt.Color(229, 229, 229));
        btn15.setText("15");
        btn15.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn15ActionPerformed(evt);
            }
        });
        pnlButton.add(btn15);

        btn16.setBackground(new java.awt.Color(229, 229, 229));
        btn16.setText("16");
        btn16.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn16ActionPerformed(evt);
            }
        });
        pnlButton.add(btn16);

        btn17.setBackground(new java.awt.Color(229, 229, 229));
        btn17.setText("17");
        btn17.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn17ActionPerformed(evt);
            }
        });
        pnlButton.add(btn17);

        btn18.setBackground(new java.awt.Color(229, 229, 229));
        btn18.setText("18");
        btn18.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn18ActionPerformed(evt);
            }
        });
        pnlButton.add(btn18);

        btn19.setBackground(new java.awt.Color(229, 229, 229));
        btn19.setText("19");
        btn19.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn19ActionPerformed(evt);
            }
        });
        pnlButton.add(btn19);

        btn20.setBackground(new java.awt.Color(229, 229, 229));
        btn20.setText("20");
        btn20.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn20ActionPerformed(evt);
            }
        });
        pnlButton.add(btn20);

        btn21.setBackground(new java.awt.Color(229, 229, 229));
        btn21.setText("21");
        btn21.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn21ActionPerformed(evt);
            }
        });
        pnlButton.add(btn21);

        btn22.setBackground(new java.awt.Color(229, 229, 229));
        btn22.setText("22");
        btn22.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn22ActionPerformed(evt);
            }
        });
        pnlButton.add(btn22);

        btn23.setBackground(new java.awt.Color(229, 229, 229));
        btn23.setText("23");
        btn23.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn23ActionPerformed(evt);
            }
        });
        pnlButton.add(btn23);

        btn24.setBackground(new java.awt.Color(229, 229, 229));
        btn24.setText("24");
        btn24.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn24ActionPerformed(evt);
            }
        });
        pnlButton.add(btn24);

        btn25.setBackground(new java.awt.Color(229, 229, 229));
        btn25.setText("25");
        btn25.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn25ActionPerformed(evt);
            }
        });
        pnlButton.add(btn25);

        btn26.setBackground(new java.awt.Color(229, 229, 229));
        btn26.setText("26");
        btn26.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn26ActionPerformed(evt);
            }
        });
        pnlButton.add(btn26);

        btn27.setBackground(new java.awt.Color(229, 229, 229));
        btn27.setText("27");
        btn27.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn27ActionPerformed(evt);
            }
        });
        pnlButton.add(btn27);

        btn28.setBackground(new java.awt.Color(229, 229, 229));
        btn28.setText("28");
        btn28.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn28ActionPerformed(evt);
            }
        });
        pnlButton.add(btn28);

        btn29.setBackground(new java.awt.Color(229, 229, 229));
        btn29.setText("29");
        btn29.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn29ActionPerformed(evt);
            }
        });
        pnlButton.add(btn29);

        btn30.setBackground(new java.awt.Color(229, 229, 229));
        btn30.setText("30");
        btn30.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn30ActionPerformed(evt);
            }
        });
        pnlButton.add(btn30);

        btn31.setBackground(new java.awt.Color(229, 229, 229));
        btn31.setText("31");
        btn31.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn31ActionPerformed(evt);
            }
        });
        pnlButton.add(btn31);

        btn32.setBackground(new java.awt.Color(229, 229, 229));
        btn32.setText("32");
        btn32.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn32ActionPerformed(evt);
            }
        });
        pnlButton.add(btn32);

        btn33.setBackground(new java.awt.Color(229, 229, 229));
        btn33.setText("33");
        btn33.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn33ActionPerformed(evt);
            }
        });
        pnlButton.add(btn33);

        btn34.setBackground(new java.awt.Color(229, 229, 229));
        btn34.setText("34");
        btn34.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn34ActionPerformed(evt);
            }
        });
        pnlButton.add(btn34);

        btn35.setBackground(new java.awt.Color(229, 229, 229));
        btn35.setText("35");
        btn35.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn35ActionPerformed(evt);
            }
        });
        pnlButton.add(btn35);

        btn36.setBackground(new java.awt.Color(229, 229, 229));
        btn36.setText("36");
        btn36.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn36ActionPerformed(evt);
            }
        });
        pnlButton.add(btn36);

        btn37.setBackground(new java.awt.Color(229, 229, 229));
        btn37.setText("37");
        btn37.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn37ActionPerformed(evt);
            }
        });
        pnlButton.add(btn37);

        btn38.setBackground(new java.awt.Color(229, 229, 229));
        btn38.setText("38");
        btn38.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn38ActionPerformed(evt);
            }
        });
        pnlButton.add(btn38);

        btn39.setBackground(new java.awt.Color(229, 229, 229));
        btn39.setText("39");
        btn39.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn39ActionPerformed(evt);
            }
        });
        pnlButton.add(btn39);

        btn40.setBackground(new java.awt.Color(229, 229, 229));
        btn40.setText("40");
        btn40.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn40ActionPerformed(evt);
            }
        });
        pnlButton.add(btn40);

        btn41.setBackground(new java.awt.Color(229, 229, 229));
        btn41.setText("41");
        btn41.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn41ActionPerformed(evt);
            }
        });
        pnlButton.add(btn41);

        btn42.setBackground(new java.awt.Color(229, 229, 229));
        btn42.setText("42");
        btn42.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn42ActionPerformed(evt);
            }
        });
        pnlButton.add(btn42);

        btn43.setBackground(new java.awt.Color(229, 229, 229));
        btn43.setText("43");
        btn43.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn43ActionPerformed(evt);
            }
        });
        pnlButton.add(btn43);

        btn44.setBackground(new java.awt.Color(229, 229, 229));
        btn44.setText("44");
        btn44.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn44ActionPerformed(evt);
            }
        });
        pnlButton.add(btn44);

        btn45.setBackground(new java.awt.Color(229, 229, 229));
        btn45.setText("45");
        btn45.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn45ActionPerformed(evt);
            }
        });
        pnlButton.add(btn45);

        btn46.setBackground(new java.awt.Color(229, 229, 229));
        btn46.setText("46");
        btn46.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn46ActionPerformed(evt);
            }
        });
        pnlButton.add(btn46);

        btn47.setBackground(new java.awt.Color(229, 229, 229));
        btn47.setText("47");
        btn47.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn47ActionPerformed(evt);
            }
        });
        pnlButton.add(btn47);

        btn48.setBackground(new java.awt.Color(229, 229, 229));
        btn48.setText("48");
        btn48.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn48ActionPerformed(evt);
            }
        });
        pnlButton.add(btn48);

        btn49.setBackground(new java.awt.Color(229, 229, 229));
        btn49.setText("49");
        btn49.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn49ActionPerformed(evt);
            }
        });
        pnlButton.add(btn49);

        btn50.setBackground(new java.awt.Color(229, 229, 229));
        btn50.setText("50");
        btn50.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn50ActionPerformed(evt);
            }
        });
        pnlButton.add(btn50);

        pnlShowQuestion.setBackground(new java.awt.Color(255, 255, 255));

        lblTitleTest.setFont(new java.awt.Font("Segoe UI", 0, 24)); // NOI18N
        lblTitleTest.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblTitleTest.setText("TIÊU ĐỀ BÀI THI");
        lblTitleTest.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);

        lblQuestionNumber.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        lblQuestionNumber.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblQuestionNumber.setText("Câu 1: Nội dung câu hỏi");
        lblQuestionNumber.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        lblQuestionNumber.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
        lblQuestionNumber.setMaximumSize(new java.awt.Dimension(167, 22));
        lblQuestionNumber.setPreferredSize(new java.awt.Dimension(167, 22));
        lblQuestionNumber.setVerticalTextPosition(javax.swing.SwingConstants.TOP);

        lblShowAnsA.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        lblShowAnsA.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblShowAnsA.setText("A. Đáp án 1");
        lblShowAnsA.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        lblShowAnsA.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
        lblShowAnsA.setMaximumSize(new java.awt.Dimension(167, 22));
        lblShowAnsA.setPreferredSize(new java.awt.Dimension(167, 22));
        lblShowAnsA.setVerticalTextPosition(javax.swing.SwingConstants.TOP);

        lblShowAnsB.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        lblShowAnsB.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblShowAnsB.setText("B. Đáp án 2");
        lblShowAnsB.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        lblShowAnsB.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
        lblShowAnsB.setMaximumSize(new java.awt.Dimension(167, 22));
        lblShowAnsB.setPreferredSize(new java.awt.Dimension(167, 22));
        lblShowAnsB.setVerticalTextPosition(javax.swing.SwingConstants.TOP);

        lblShowAnsC.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        lblShowAnsC.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblShowAnsC.setText("C. Đáp án 3");
        lblShowAnsC.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        lblShowAnsC.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
        lblShowAnsC.setMaximumSize(new java.awt.Dimension(167, 22));
        lblShowAnsC.setPreferredSize(new java.awt.Dimension(167, 22));
        lblShowAnsC.setVerticalTextPosition(javax.swing.SwingConstants.TOP);

        lblShowAnsD.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        lblShowAnsD.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblShowAnsD.setText("D. Đáp án 4");
        lblShowAnsD.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        lblShowAnsD.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
        lblShowAnsD.setMaximumSize(new java.awt.Dimension(167, 22));
        lblShowAnsD.setPreferredSize(new java.awt.Dimension(167, 22));
        lblShowAnsD.setVerticalTextPosition(javax.swing.SwingConstants.TOP);

        javax.swing.GroupLayout pnlShowQuestionLayout = new javax.swing.GroupLayout(pnlShowQuestion);
        pnlShowQuestion.setLayout(pnlShowQuestionLayout);
        pnlShowQuestionLayout.setHorizontalGroup(
            pnlShowQuestionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(lblTitleTest, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(pnlShowQuestionLayout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addGroup(pnlShowQuestionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblShowAnsD, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblShowAnsC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblShowAnsB, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblShowAnsA, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblQuestionNumber, javax.swing.GroupLayout.PREFERRED_SIZE, 696, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(36, Short.MAX_VALUE))
        );
        pnlShowQuestionLayout.setVerticalGroup(
            pnlShowQuestionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlShowQuestionLayout.createSequentialGroup()
                .addComponent(lblTitleTest)
                .addGap(18, 18, 18)
                .addComponent(lblQuestionNumber, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(lblShowAnsA, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblShowAnsB, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblShowAnsC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblShowAnsD, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(98, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout pnlContentLayout = new javax.swing.GroupLayout(pnlContent);
        pnlContent.setLayout(pnlContentLayout);
        pnlContentLayout.setHorizontalGroup(
            pnlContentLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlContentLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlContentLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(pnlShowQuestion, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(pnlButton, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE))
                .addContainerGap())
        );
        pnlContentLayout.setVerticalGroup(
            pnlContentLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlContentLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(pnlShowQuestion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(pnlButton, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pnlChooseAnswer.setBackground(new java.awt.Color(229, 229, 229));

        lblChooseAns.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        lblChooseAns.setText("Chọn đáp án:");

        rdoChooseAnsA.setBackground(new java.awt.Color(229, 229, 229));
        grChoose.add(rdoChooseAnsA);
        rdoChooseAnsA.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        rdoChooseAnsA.setSelected(true);
        rdoChooseAnsA.setText("A");
        rdoChooseAnsA.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdoChooseAnsAActionPerformed(evt);
            }
        });

        rdoChooseAnsB.setBackground(new java.awt.Color(229, 229, 229));
        grChoose.add(rdoChooseAnsB);
        rdoChooseAnsB.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        rdoChooseAnsB.setText("B");
        rdoChooseAnsB.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdoChooseAnsBActionPerformed(evt);
            }
        });

        rdoChooseAnsC.setBackground(new java.awt.Color(229, 229, 229));
        grChoose.add(rdoChooseAnsC);
        rdoChooseAnsC.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        rdoChooseAnsC.setText("C");
        rdoChooseAnsC.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdoChooseAnsCActionPerformed(evt);
            }
        });

        rdoChooseAnsD.setBackground(new java.awt.Color(229, 229, 229));
        grChoose.add(rdoChooseAnsD);
        rdoChooseAnsD.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N
        rdoChooseAnsD.setText("D");
        rdoChooseAnsD.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdoChooseAnsDActionPerformed(evt);
            }
        });

        btnPrev.setBackground(new java.awt.Color(0, 102, 0));
        btnPrev.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnPrev.setForeground(new java.awt.Color(255, 255, 255));
        btnPrev.setText("Câu trước");
        btnPrev.setFocusable(false);
        btnPrev.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPrevActionPerformed(evt);
            }
        });

        btnNext.setBackground(new java.awt.Color(0, 102, 0));
        btnNext.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnNext.setForeground(new java.awt.Color(255, 255, 255));
        btnNext.setText("Câu tiếp");
        btnNext.setFocusable(false);
        btnNext.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNextActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout pnlChooseAnswerLayout = new javax.swing.GroupLayout(pnlChooseAnswer);
        pnlChooseAnswer.setLayout(pnlChooseAnswerLayout);
        pnlChooseAnswerLayout.setHorizontalGroup(
            pnlChooseAnswerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlChooseAnswerLayout.createSequentialGroup()
                .addGroup(pnlChooseAnswerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(pnlChooseAnswerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(btnPrev, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(btnNext, javax.swing.GroupLayout.PREFERRED_SIZE, 94, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(pnlChooseAnswerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(pnlChooseAnswerLayout.createSequentialGroup()
                            .addContainerGap()
                            .addComponent(lblChooseAns))
                        .addGroup(pnlChooseAnswerLayout.createSequentialGroup()
                            .addGap(47, 47, 47)
                            .addGroup(pnlChooseAnswerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(rdoChooseAnsC)
                                .addComponent(rdoChooseAnsD)
                                .addGroup(pnlChooseAnswerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(rdoChooseAnsB, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(rdoChooseAnsA, javax.swing.GroupLayout.Alignment.LEADING))))))
                .addContainerGap(29, Short.MAX_VALUE))
        );
        pnlChooseAnswerLayout.setVerticalGroup(
            pnlChooseAnswerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlChooseAnswerLayout.createSequentialGroup()
                .addGap(59, 59, 59)
                .addComponent(lblChooseAns)
                .addGap(76, 76, 76)
                .addComponent(rdoChooseAnsA)
                .addGap(18, 18, 18)
                .addComponent(rdoChooseAnsB)
                .addGap(18, 18, 18)
                .addComponent(rdoChooseAnsC)
                .addGap(18, 18, 18)
                .addComponent(rdoChooseAnsD)
                .addGap(65, 65, 65)
                .addComponent(btnPrev)
                .addGap(18, 18, 18)
                .addComponent(btnNext)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout pnlBackgroundLayout = new javax.swing.GroupLayout(pnlBackground);
        pnlBackground.setLayout(pnlBackgroundLayout);
        pnlBackgroundLayout.setHorizontalGroup(
            pnlBackgroundLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlBackgroundLayout.createSequentialGroup()
                .addGap(195, 195, 195)
                .addGroup(pnlBackgroundLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlBackgroundLayout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(lblDoneQuestion)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnEndTest, javax.swing.GroupLayout.PREFERRED_SIZE, 140, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(52, 52, 52))
                    .addGroup(pnlBackgroundLayout.createSequentialGroup()
                        .addComponent(lblLogo)
                        .addGroup(pnlBackgroundLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnlBackgroundLayout.createSequentialGroup()
                                .addGap(72, 72, 72)
                                .addComponent(lblTitle)
                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlBackgroundLayout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(lblTime, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(96, 96, 96))))))
            .addGroup(pnlBackgroundLayout.createSequentialGroup()
                .addGap(43, 43, 43)
                .addComponent(pnlChooseAnswer, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pnlContent, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 22, Short.MAX_VALUE))
        );
        pnlBackgroundLayout.setVerticalGroup(
            pnlBackgroundLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlBackgroundLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pnlBackgroundLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlBackgroundLayout.createSequentialGroup()
                        .addGroup(pnlBackgroundLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblLogo)
                            .addGroup(pnlBackgroundLayout.createSequentialGroup()
                                .addGap(25, 25, 25)
                                .addComponent(lblTitle)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblDoneQuestion))
                    .addGroup(pnlBackgroundLayout.createSequentialGroup()
                        .addGap(57, 57, 57)
                        .addComponent(lblTime)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnEndTest, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(8, 8, 8)
                .addGroup(pnlBackgroundLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(pnlChooseAnswer, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(pnlContent, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(18, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(pnlBackground, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(pnlBackground, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    /**
     * Closes the dialog
     */
    private void closeDialog(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_closeDialog
        EndTest();
    }//GEN-LAST:event_closeDialog

    private void btnEndTestActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEndTestActionPerformed
        EndTest();
    }//GEN-LAST:event_btnEndTestActionPerformed

    private void rdoChooseAnsAActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdoChooseAnsAActionPerformed
        updateAwsSelected();
        setStatus();
    }//GEN-LAST:event_rdoChooseAnsAActionPerformed

    private void btn1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn1ActionPerformed
        selectedQuestion(1);
    }//GEN-LAST:event_btn1ActionPerformed

    private void btn2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn2ActionPerformed
        selectedQuestion(2);
    }//GEN-LAST:event_btn2ActionPerformed

    private void btn3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn3ActionPerformed
        selectedQuestion(3);
    }//GEN-LAST:event_btn3ActionPerformed

    private void rdoChooseAnsBActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdoChooseAnsBActionPerformed
        updateAwsSelected();
        setStatus();
    }//GEN-LAST:event_rdoChooseAnsBActionPerformed

    private void rdoChooseAnsCActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdoChooseAnsCActionPerformed
        updateAwsSelected();
        setStatus();
    }//GEN-LAST:event_rdoChooseAnsCActionPerformed

    private void rdoChooseAnsDActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdoChooseAnsDActionPerformed
        updateAwsSelected();
        setStatus();
    }//GEN-LAST:event_rdoChooseAnsDActionPerformed

    private void btn4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn4ActionPerformed
        selectedQuestion(4);
    }//GEN-LAST:event_btn4ActionPerformed

    private void btn5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn5ActionPerformed
        selectedQuestion(5);
    }//GEN-LAST:event_btn5ActionPerformed

    private void btn6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn6ActionPerformed
        selectedQuestion(7);
    }//GEN-LAST:event_btn6ActionPerformed

    private void btn8ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn8ActionPerformed
        selectedQuestion(8);
    }//GEN-LAST:event_btn8ActionPerformed

    private void btn9ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn9ActionPerformed
        selectedQuestion(9);
    }//GEN-LAST:event_btn9ActionPerformed

    private void btn10ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn10ActionPerformed
        selectedQuestion(10);
    }//GEN-LAST:event_btn10ActionPerformed

    private void btn11ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn11ActionPerformed
        selectedQuestion(11);
    }//GEN-LAST:event_btn11ActionPerformed

    private void btn12ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn12ActionPerformed
        selectedQuestion(12);
    }//GEN-LAST:event_btn12ActionPerformed

    private void btn13ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn13ActionPerformed
        selectedQuestion(13);
    }//GEN-LAST:event_btn13ActionPerformed

    private void btn14ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn14ActionPerformed
        selectedQuestion(14);
    }//GEN-LAST:event_btn14ActionPerformed

    private void btn15ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn15ActionPerformed
        selectedQuestion(15);
    }//GEN-LAST:event_btn15ActionPerformed

    private void btn16ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn16ActionPerformed
        selectedQuestion(16);
    }//GEN-LAST:event_btn16ActionPerformed

    private void btn17ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn17ActionPerformed
        selectedQuestion(17);
    }//GEN-LAST:event_btn17ActionPerformed

    private void btn18ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn18ActionPerformed
        selectedQuestion(18);
    }//GEN-LAST:event_btn18ActionPerformed

    private void btn19ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn19ActionPerformed
        selectedQuestion(19);
    }//GEN-LAST:event_btn19ActionPerformed

    private void btn20ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn20ActionPerformed
        selectedQuestion(20);
    }//GEN-LAST:event_btn20ActionPerformed

    private void btn21ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn21ActionPerformed
        selectedQuestion(21);
    }//GEN-LAST:event_btn21ActionPerformed

    private void btn22ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn22ActionPerformed
        selectedQuestion(22);
    }//GEN-LAST:event_btn22ActionPerformed

    private void btn23ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn23ActionPerformed
        selectedQuestion(23);
    }//GEN-LAST:event_btn23ActionPerformed

    private void btn24ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn24ActionPerformed
        selectedQuestion(24);
    }//GEN-LAST:event_btn24ActionPerformed

    private void btn25ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn25ActionPerformed
        selectedQuestion(25);
    }//GEN-LAST:event_btn25ActionPerformed

    private void btn26ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn26ActionPerformed
        selectedQuestion(26);
    }//GEN-LAST:event_btn26ActionPerformed

    private void btn27ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn27ActionPerformed
        selectedQuestion(27);
    }//GEN-LAST:event_btn27ActionPerformed

    private void btn28ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn28ActionPerformed
        selectedQuestion(28);
    }//GEN-LAST:event_btn28ActionPerformed

    private void btn29ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn29ActionPerformed
        selectedQuestion(29);
    }//GEN-LAST:event_btn29ActionPerformed

    private void btn30ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn30ActionPerformed
        selectedQuestion(30);
    }//GEN-LAST:event_btn30ActionPerformed

    private void btn31ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn31ActionPerformed
        selectedQuestion(31);
    }//GEN-LAST:event_btn31ActionPerformed

    private void btn32ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn32ActionPerformed
        selectedQuestion(32);
    }//GEN-LAST:event_btn32ActionPerformed

    private void btn33ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn33ActionPerformed
        selectedQuestion(33);
    }//GEN-LAST:event_btn33ActionPerformed

    private void btn34ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn34ActionPerformed
        selectedQuestion(34);
    }//GEN-LAST:event_btn34ActionPerformed

    private void btn35ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn35ActionPerformed
        selectedQuestion(35);
    }//GEN-LAST:event_btn35ActionPerformed

    private void btn36ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn36ActionPerformed
        selectedQuestion(36);
    }//GEN-LAST:event_btn36ActionPerformed

    private void btn37ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn37ActionPerformed
        selectedQuestion(37);
    }//GEN-LAST:event_btn37ActionPerformed

    private void btn38ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn38ActionPerformed
        selectedQuestion(38);
    }//GEN-LAST:event_btn38ActionPerformed

    private void btn39ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn39ActionPerformed
        selectedQuestion(39);
    }//GEN-LAST:event_btn39ActionPerformed

    private void btn40ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn40ActionPerformed
        selectedQuestion(40);
    }//GEN-LAST:event_btn40ActionPerformed

    private void btnPrevActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPrevActionPerformed
        prev();
    }//GEN-LAST:event_btnPrevActionPerformed

    private void btnNextActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNextActionPerformed
        next();
    }//GEN-LAST:event_btnNextActionPerformed

    private void btn41ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn41ActionPerformed
        selectedQuestion(41);
    }//GEN-LAST:event_btn41ActionPerformed

    private void btn42ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn42ActionPerformed
       selectedQuestion(42);
    }//GEN-LAST:event_btn42ActionPerformed

    private void btn43ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn43ActionPerformed
        selectedQuestion(43);
    }//GEN-LAST:event_btn43ActionPerformed

    private void btn44ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn44ActionPerformed
        selectedQuestion(44);
    }//GEN-LAST:event_btn44ActionPerformed

    private void btn45ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn45ActionPerformed
        selectedQuestion(45);
    }//GEN-LAST:event_btn45ActionPerformed

    private void btn46ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn46ActionPerformed
        selectedQuestion(46);
    }//GEN-LAST:event_btn46ActionPerformed

    private void btn47ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn47ActionPerformed
        selectedQuestion(47);
    }//GEN-LAST:event_btn47ActionPerformed

    private void btn48ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn48ActionPerformed
        selectedQuestion(48);
    }//GEN-LAST:event_btn48ActionPerformed

    private void btn49ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn49ActionPerformed
        selectedQuestion(49);
    }//GEN-LAST:event_btn49ActionPerformed

    private void btn50ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn50ActionPerformed
        selectedQuestion(50);
    }//GEN-LAST:event_btn50ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                DoTest dialog = new DoTest(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                    public void windowClosing(java.awt.event.WindowEvent e) {
                    }
                });
                dialog.setVisible(true);
            }
        });
    }


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btn1;
    private javax.swing.JButton btn10;
    private javax.swing.JButton btn11;
    private javax.swing.JButton btn12;
    private javax.swing.JButton btn13;
    private javax.swing.JButton btn14;
    private javax.swing.JButton btn15;
    private javax.swing.JButton btn16;
    private javax.swing.JButton btn17;
    private javax.swing.JButton btn18;
    private javax.swing.JButton btn19;
    private javax.swing.JButton btn2;
    private javax.swing.JButton btn20;
    private javax.swing.JButton btn21;
    private javax.swing.JButton btn22;
    private javax.swing.JButton btn23;
    private javax.swing.JButton btn24;
    private javax.swing.JButton btn25;
    private javax.swing.JButton btn26;
    private javax.swing.JButton btn27;
    private javax.swing.JButton btn28;
    private javax.swing.JButton btn29;
    private javax.swing.JButton btn3;
    private javax.swing.JButton btn30;
    private javax.swing.JButton btn31;
    private javax.swing.JButton btn32;
    private javax.swing.JButton btn33;
    private javax.swing.JButton btn34;
    private javax.swing.JButton btn35;
    private javax.swing.JButton btn36;
    private javax.swing.JButton btn37;
    private javax.swing.JButton btn38;
    private javax.swing.JButton btn39;
    private javax.swing.JButton btn4;
    private javax.swing.JButton btn40;
    private javax.swing.JButton btn41;
    private javax.swing.JButton btn42;
    private javax.swing.JButton btn43;
    private javax.swing.JButton btn44;
    private javax.swing.JButton btn45;
    private javax.swing.JButton btn46;
    private javax.swing.JButton btn47;
    private javax.swing.JButton btn48;
    private javax.swing.JButton btn49;
    private javax.swing.JButton btn5;
    private javax.swing.JButton btn50;
    private javax.swing.JButton btn6;
    private javax.swing.JButton btn7;
    private javax.swing.JButton btn8;
    private javax.swing.JButton btn9;
    private javax.swing.JButton btnEndTest;
    private javax.swing.JButton btnNext;
    private javax.swing.JButton btnPrev;
    private javax.swing.ButtonGroup grChoose;
    private javax.swing.JLabel lblChooseAns;
    private javax.swing.JLabel lblDoneQuestion;
    private javax.swing.JLabel lblLogo;
    private javax.swing.JLabel lblQuestionNumber;
    private javax.swing.JLabel lblShowAnsA;
    private javax.swing.JLabel lblShowAnsB;
    private javax.swing.JLabel lblShowAnsC;
    private javax.swing.JLabel lblShowAnsD;
    private javax.swing.JLabel lblTime;
    private javax.swing.JLabel lblTitle;
    private javax.swing.JLabel lblTitleTest;
    private javax.swing.JPanel pnlBackground;
    private javax.swing.JPanel pnlButton;
    private javax.swing.JPanel pnlChooseAnswer;
    private javax.swing.JPanel pnlContent;
    private javax.swing.JPanel pnlShowQuestion;
    private javax.swing.JRadioButton rdoChooseAnsA;
    private javax.swing.JRadioButton rdoChooseAnsB;
    private javax.swing.JRadioButton rdoChooseAnsC;
    private javax.swing.JRadioButton rdoChooseAnsD;
    // End of variables declaration//GEN-END:variables

    ResutlDAO rDao = new ResutlDAO();
    QuestionOfTestDAO QOTDao = new QuestionOfTestDAO();
    QuestionDAO qDao = new QuestionDAO();
    TestDAO tDao = new TestDAO();
    StudentDAO sDao = new StudentDAO();
    public static Test testEntity = null;
    public static Student sEntity = null;
    List<QuestionOfTest> listQOT;
    List<Question> listQ = new ArrayList<>();
    List<JButton> listButton = new ArrayList<>();
    public static List<Result> listR = new ArrayList<>();
    public static int indexTest = 0;
    int indexQuestion = 1;
    int mm = 1;
    int ss = 10;
    public static Timer clock;
    int timeDefaul = 0;
    public static int timeTested = 0;

    private void fillQuestion(Question qEntity, Result rEntity) {
        lblQuestionNumber.setText("Câu " + rEntity.getIndexQuestion() + ": " + qEntity.getQuestion());
        String A = qEntity.getAns1();
        String B = qEntity.getAns2();
        String C = qEntity.getAns3();
        String D = qEntity.getAns4();

        lblShowAnsA.setText("A. " + A);
        lblShowAnsB.setText("B. " + B);
        lblShowAnsC.setText("C. " + C);
        lblShowAnsD.setText("D. " + D);

        if (rEntity.getAnsSelected().equals("A")) {
            rdoChooseAnsA.setSelected(true);
        } else if (rEntity.getAnsSelected().equals("B")) {
            rdoChooseAnsB.setSelected(true);
        } else if (rEntity.getAnsSelected().equals("C")) {
            rdoChooseAnsC.setSelected(true);
        } else if (rEntity.getAnsSelected().equals("D")) {
            rdoChooseAnsD.setSelected(true);
        } else {
            grChoose.clearSelection();
        }
    }

    private void loadData() {
        lblTitleTest.setText(testEntity.getTestTitle());
        listQOT = QOTDao.selectByTestId(testEntity.getTestID());
        int i = 1;
        for (QuestionOfTest QOTEntity : listQOT) {
            Question qEntity = qDao.selectById(QOTEntity.getQuestionID());
            listQ.add(qEntity);

            Result rEntity = new Result();
            rEntity.setIndexTest(indexTest);
            rEntity.setStudentID(sEntity.getStudentID());
            rEntity.setTestID(testEntity.getTestID());
            rEntity.setIndexQuestion(i);
            rEntity.setAnsSelected("");
            rEntity.setAnsCorrect(qEntity.getAns());
            rDao.insert(rEntity);
            i++;
        }
        setLblDoneQuestion();
    }

    private void setIndexTest() {
        Result lastResult = rDao.selectByTestStudent(sEntity.getStudentID(), testEntity.getTestID());
        if (lastResult == null) {
            indexTest = 1;
        } else {
            indexTest = lastResult.getIndexTest() + 1;
        }
    }

    private void selectedQuestion(int index) {
        try {
            Question qEntity = listQ.get(index - 1);
            Result rEntity = rDao.selectByIdSupport(indexTest, sEntity.getStudentID(), testEntity.getTestID(), index);
            fillQuestion(qEntity, rEntity);
            indexQuestion = index;
        } catch (Exception e) {
            Question qEntity = new Question(0, "", "", "", "", "", "", 0, "");
            Result rEntity = new Result(0, "", "", 0, "", "", new Date());
            fillQuestion(qEntity, rEntity);
        }
    }

    private void setLblDoneQuestion() {
        int sum = listQOT.size();
        int done = 0;
        List<Result> rList = rDao.selectByIndexTest(sEntity.getStudentID(), testEntity.getTestID(), indexTest);
        for (Result result : rList) {
            if (!result.getAnsSelected().equals("")) {
                done++;
            }
        }
        lblDoneQuestion.setText("Số câu đã làm: " + done + "/" + sum);
    }

    private void updateAwsSelected() {
        Result rEntity = rDao.selectByIdSupport(indexTest, sEntity.getStudentID(), testEntity.getTestID(), indexQuestion);
        if (rdoChooseAnsA.isSelected()) {
            rEntity.setAnsSelected("A");
        } else if (rdoChooseAnsB.isSelected()) {
            rEntity.setAnsSelected("B");
        } else if (rdoChooseAnsC.isSelected()) {
            rEntity.setAnsSelected("C");
        } else if (rdoChooseAnsD.isSelected()) {
            rEntity.setAnsSelected("D");
        }
        rDao.update(rEntity);
        setLblDoneQuestion();
    }

    private void addButton() {
        listButton.add(btn1);
        listButton.add(btn2);
        listButton.add(btn3);
        listButton.add(btn4);
        listButton.add(btn5);
        listButton.add(btn6);
        listButton.add(btn7);
        listButton.add(btn8);
        listButton.add(btn9);
        listButton.add(btn10);
        listButton.add(btn11);
        listButton.add(btn12);
        listButton.add(btn13);
        listButton.add(btn14);
        listButton.add(btn15);
        listButton.add(btn16);
        listButton.add(btn17);
        listButton.add(btn18);
        listButton.add(btn19);
        listButton.add(btn20);
        listButton.add(btn21);
        listButton.add(btn22);
        listButton.add(btn23);
        listButton.add(btn24);
        listButton.add(btn25);
        listButton.add(btn26);
        listButton.add(btn27);
        listButton.add(btn28);
        listButton.add(btn29);
        listButton.add(btn30);
        listButton.add(btn31);
        listButton.add(btn32);
        listButton.add(btn33);
        listButton.add(btn34);
        listButton.add(btn35);
        listButton.add(btn36);
        listButton.add(btn37);
        listButton.add(btn38);
        listButton.add(btn39);
        listButton.add(btn40);
        listButton.add(btn41);
        listButton.add(btn42);
        listButton.add(btn43);
        listButton.add(btn44);
        listButton.add(btn45);
        listButton.add(btn46);
        listButton.add(btn47);
        listButton.add(btn48);
        listButton.add(btn49);
        listButton.add(btn50);
    }

    private void setStatusButton() {
        for (int i = listButton.size() - 1; i >= listQOT.size(); i--) {
            listButton.get(i).setEnabled(false);
        }
    }

    private void setStatus() {
        Result rEntity = rDao.selectByIdSupport(indexTest, sEntity.getStudentID(), testEntity.getTestID(), indexQuestion);
        if (!rEntity.getAnsSelected().equals("")) {
            listButton.get(indexQuestion - 1).setBackground(Color.green);
        } else {
            listButton.get(indexQuestion - 1).setBackground(Color.red);
        }
    }

    private void EndTest() {
        if (MsgBox.confirm(this, "Bạn có chắc chắn muốn kết thúc bài thi không ?")) {
            timeDefaul = Integer.parseInt(lblTime.getText().substring(0, 2));
            timeTested = 60 - timeDefaul;
            DoTestReport ReportTest = new DoTestReport();
            ReportTest.setVisible(true);
            this.setVisible(false);
            this.dispose();
        }
    }

    private void prev() {
        if (this.indexQuestion > 1) {
            this.indexQuestion--;
            Question qEntity = listQ.get(indexQuestion - 1);
            Result rEntity = rDao.selectByIdSupport(indexTest, sEntity.getStudentID(), testEntity.getTestID(), indexQuestion);
            fillQuestion(qEntity, rEntity);
            fillQuestion(qEntity, rEntity);
        }
    }

    private void next() {
        if (this.indexQuestion < listQOT.size()) {
            this.indexQuestion++;
            Question qEntity = listQ.get(indexQuestion - 1);
            Result rEntity = rDao.selectByIdSupport(indexTest, sEntity.getStudentID(), testEntity.getTestID(), indexQuestion);
            fillQuestion(qEntity, rEntity);
            fillQuestion(qEntity, rEntity);
        }
    }

    private void setTime() {
        clock = new Timer(1000, new ActionListener() {
            SimpleDateFormat format = new SimpleDateFormat("mm:ss");

            @Override
            public void actionPerformed(ActionEvent e) {
                ss--;
                if (mm > 0 && ss == 00) {
                    mm--;
                    if (mm == 0) {
                        ss = 59;
                    }
                }

                if (mm == 0 && ss == 0) {
                    EndTest();
                }
                lblTime.setText(format.format(new Date(0, 0, 0, 0, mm, ss)));
            }
        });
        clock.start();
    }

    public Timer getClock() {
        return clock;
    }

    private void init() {
        testEntity = tDao.selectById("TOA01");
        sEntity = sDao.selectById("HS25579");
        setTime();
        addButton();
        setIndexTest();
        loadData();
        setStatusButton();
        Result rEntity = rDao.selectByIdSupport(indexTest, sEntity.getStudentID(), testEntity.getTestID(), 1);
        fillQuestion(listQ.get(0), rEntity);
    }
}
